(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{621:function(t,e,r){"use strict";r.r(e);var n=r(463),o=r(623),l=r(221),c=r(208),_=r(63),m=r(454),d=r(468),v=r(528),f=r(531),k=r(453),h=r(72),x=r(206),w=r(179),C=r(609),y=r(612),D=r(510),T=r(466),j=r(54),S=r(235),V=(r(8),r(56),r(28)),I=(r(78),r(3),r(41),r(42),r(24),r(59),r(75),r(301),r(38),r(498),r(77),r(509),{name:"IndivisualGroupPage",data:function(){return{videoViewer:!1,group:{},events:[],streamVideoId:[],tags:[],ticketResult:[],editable:!1,events_show:!0,ticket_person:1,person_labels:["1‰∫∫","2‰∫∫","3‰∫∫"],person_icons:["mdi-account","mdi-account-multiple","mdi-account-group"],success_alert:!1,error_alert:!1,success_message:"",error_message:""}},asyncData:function(t){return Object(V.a)(regeneratorRuntime.mark((function e(){var r,n,o,l,c,_,m,d,v,f,i,k,h,x,w,C,y;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.params,n=t.error,o=t.$axios,f=!1,e.next=4,Promise.all([o.get("/groups/"+r.groupId),o.get("/groups/"+r.groupId+"/events"),o.get("/users/me"),o.get("/users/me/authority"),o.get("/groups/"+r.groupId+"/tags")]).then((function(t){l=t[0].data,_=t[1].data,d=t[2].data,v=t[3].data,m=t[4].data})).catch((function(t){n({statusCode:404,message:t.message})}));case 4:for(c=/[^/]*$/.exec(l.stream_url)[0],i=0;i<_.length;i++)_[i].dialog=!1;for((1==v.is_admin||v.owner_of.includes(l.id))&&(f=!0),k=[],h=[],i=0;i<_.length;i++)k.push(o.get("/timetable/"+_[i].timetable_id)),h.push(o.get("/groups/"+l.id+"/events/"+_[i].id+"/tickets"));return e.next=12,Promise.all(k).then((function(t){for(var i=0;i<_.length;i++)_[i].timetable=t[i].data,_[i].timetable.sell_at=new Date(_[i].timetable.sell_at),_[i].timetable.sell_ends=new Date(_[i].timetable.sell_ends),_[i].timetable.starts_at=new Date(_[i].timetable.starts_at),_[i].timetable.ends_at=new Date(_[i].timetable.ends_at)}));case 12:return e.next=14,Promise.all(h).then((function(t){for(var i=0;i<_.length;i++)_[i].ticket_number_data=t[i].data}));case 14:for(x=[],w=[],C=0;C<_.length;C++)_[C].timetable.sell_at.getTime()<=Date.now()&&Date.now()<=_[C].timetable.sell_ends.getTime()?x.push(_[C]):w.push(_[C]);return x.sort((function(t,e){return t.timetable.starts_at.getTime()<e.timetable.starts_at.getTime()?-1:t.timetable.starts_at.getTime()>e.timetable.starts_at.getTime()?1:0})),w.sort((function(t,e){return t.timetable.starts_at.getTime()<e.timetable.starts_at.getTime()?-1:t.timetable.starts_at.getTime()>e.timetable.starts_at.getTime()?1:0})),y=x.concat(w),e.abrupt("return",{group:l,events:y,streamVideoId:c,tags:m,editable:f,user_me:d});case 21:case"end":return e.stop()}}),e)})))()},methods:{DateFormatter:function(t){return t.getMonth()+1+"Êúà"+t.getDate()+"Êó• "+t.getHours().toString().padStart(2,"0")+":"+t.getMinutes().toString().padStart(2,"0")},HashColor:function(text){for(var t=["blue-grey","brown","deep-orange","amber","lime","light-green","teal","cyan","light-blue","indigo","pink"],e=0,i=0;i<text.length;i++)e+=text.codePointAt(i);return t[e%=t.length]},CreateTicket:function(t,e){var r=this;return Object(V.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.dialog=!1,r.user_me.is_student&&(e=1),n.next=4,r.$axios.post("/groups/"+t.group_id+"/events/"+t.id+"/tickets?person="+e).then((function(t){r.success_message="Êï¥ÁêÜÂà∏„ÇíÂèñÂæó„Åß„Åç„Åæ„Åó„ÅüÔºÅ„ÄåÊï¥ÁêÜÂà∏„Äç„Çø„Éñ„Åã„ÇâÁ¢∫Ë™ç„Åó„Å¶„Åè„Å†„Åï„ÅÑ",r.success_alert=!0})).catch((function(t){t.response?r.error_message=t.response.data.detail:r.error_message="‰∫àÊúü„Åõ„Å¨„Ç®„É©„Éº„ÅåÁô∫Áîü„Åó„Åæ„Åó„Åü„ÄÇITÈÉ®Èöä„Å´„ÅäÂ£∞„Åå„Åë„Åè„Å†„Åï„ÅÑüôá‚Äç‚ôÇÔ∏è",r.error_alert=!0}));case 4:case"end":return n.stop()}}),n)})))()}}}),F=r(96),component=Object(F.a)(I,(function(){var t=this,e=t._self._c;return e(n.a,[e(l.a,{attrs:{icon:"",fab:"",to:"/groups/"}},[e(x.a,[t._v("mdi-chevron-left")])],1),t._v(" "),e("v-conteiner",[e(C.a,{staticClass:"ma-0 pa-0",attrs:{justify:"center"}},[e(v.a,{staticClass:"mx-0 my-2 px-0 py-0 px-sm-3",attrs:{cols:"12",sm:"6",lg:"4"}},[e(c.a,[null!=t.group.cover_image?e(w.a,{attrs:{maxHeight:"500px",src:"data:image/jpeg;base64,"+t.group.cover_image}}):null!=t.group.thumbnail_image?e(w.a,{attrs:{maxHeight:"500px",src:"data:image/jpeg;base64,"+t.group.thumbnail_image}}):e(w.a,{class:t.HashColor(t.group.id),attrs:{height:"180px"}}),t._v(" "),e(_.d,{attrs:{clsss:"pb-0"}},[t._v(t._s(t.group.title))]),t._v(" "),e(_.b,{staticClass:"pb-0"},[t._v(t._s(t.group.groupname))]),t._v(" "),e(_.a,[e(d.a,{attrs:{column:""}},t._l(t.tags,(function(r){return e(m.a,{attrs:{disabled:""}},[t._v("\n                            "+t._s(r.tagname)+"\n                        ")])})),1)],1),t._v(" "),1==t.editable?e(_.a,[e(l.a,{attrs:{color:"blue-grey",dark:"",outlined:"",rounded:"",width:"100%",to:"/groups/"+t.group.id+"/edit"}},[e(x.a,[t._v("mdi-pencil")]),t._v("\n                            Âõ£‰ΩìÊÉÖÂ†±„ÇíÁ∑®ÈõÜ\n                        ")],1)],1):t._e(),t._v(" "),e(_.a,[null!=t.group.twitter_url?e(l.a,{attrs:{icon:"",href:t.group.twitter_url,target:"_blank"}},[e(x.a,[t._v("mdi-twitter")])],1):t._e(),t._v(" "),null!=t.group.instagram_url?e(l.a,{attrs:{icon:"",href:t.group.instagram_url,target:"_blank"}},[e(x.a,[t._v("mdi-instagram")])],1):t._e(),t._v(" "),e(T.a),t._v(" "),e(l.a,{attrs:{color:"primary",dark:"",rounded:""},on:{click:function(e){t.videoViewer=!0}}},[e(x.a,[t._v("mdi-play")]),t._v("\n                            Êò†ÂÉè„ÅßÈëëË≥û\n                        ")],1)],1),t._v(" "),e(f.a,{attrs:{fullscreen:""},model:{value:t.videoViewer,callback:function(e){t.videoViewer=e},expression:"videoViewer"}},[e(c.a,{attrs:{dark:""}},[e(j.a,{attrs:{dark:"",color:"primary"}},[e(l.a,{attrs:{icon:"",dark:""},on:{click:function(e){t.videoViewer=!1}}},[e(x.a,[t._v("mdi-close")])],1),t._v(" "),e(S.a,[t._v(t._s(t.group.title)+" - "+t._s(t.group.groupname))])],1),t._v(" "),e(C.a,{staticClass:"ma-0 pa-0",attrs:{justify:"center","align-content":"center"}},[e(v.a,{attrs:{cols:"12"}},[null!=t.group.stream_url?e("iframe",{staticClass:"ma-0 pa-0",attrs:{height:"400px",width:"99%",src:"https://web.microsoftstream.com/embed/video/"+t.streamVideoId+"?autoplay=false&showinfo=false",allowfullscreen:""}}):e(_.c,{staticClass:"pa-1 ma-0 deep-orange--text"},[t._v("„Åì„ÅÆÂõ£‰Ωì„ÅÆÊò†ÂÉè„ÅØ„Åæ„Å†ÂÖ¨Èñã„Åï„Çå„Å¶„ÅÑ„Åæ„Åõ„Çì„ÄÇÈÖç‰ø°ÈñãÂßã„Çí„ÅäÊ•Ω„Åó„Åø„Å´ÔºÅ")])],1),t._v(" "),e(_.c,[t._v("‚ÄªÊò†ÂÉèÈëëË≥û„Å´„ÅØÔºåÂ≠¶Ê†°„ÅßÈÖçÂ∏É„Åï„Çå„ÅüMicrosoft„Ç¢„Ç´„Ç¶„É≥„Éà„Å∏„ÅÆ„É≠„Ç∞„Ç§„É≥„ÅåÂøÖË¶Å„Åß„Åô„ÄÇ")]),t._v(" "),null!=t.group.stream_url?e(v.a,{attrs:{cols:"12"}},[e(C.a,{attrs:{justify:"center"}},[e(l.a,{attrs:{color:"primary",href:t.group.stream_url,target:"_blank"}},[t._v("ÂÜçÁîü„Åß„Åç„Å™„ÅÑÂ†¥ÂêàÔºàStream„ÅßÂÜçÁîüÔºâÔºû")])],1)],1):t._e()],1)],1)],1)],1)],1),t._v(" "),e(v.a,{staticClass:"mx-0 my-2 px-0 py-0 px-sm-3",attrs:{cols:"12",sm:"6",lg:"4"}},[e(c.a,{staticClass:"mb-4"},[e(_.d,{staticClass:"ma-0 px-3 pb-2 pt-4",on:{click:function(e){t.events_show=!t.events_show}}},[e(x.a,[t._v("mdi-ticket")]),t._v("\n                    Ë¶≥Âäá‰∫àÁ¥Ñ\n                    "),e(T.a),t._v(" "),e(l.a,{attrs:{icon:""}},[e(x.a,[t._v(t._s(t.events_show?"mdi-chevron-up":"mdi-chevron-down"))])],1)],1),t._v(" "),e(_.c,{staticClass:"ma-0 px-3 py-2"},[t._v("ÁèæÂú∞„ÅßË¶ã„Åü„ÅÑÂÖ¨Êºî„ÅÆÊï¥ÁêÜÂà∏„ÇíÂèñÂæó„Åß„Åç„Åæ„Åô„ÄÇ")]),t._v(" "),e(h.a,[e("div",{directives:[{name:"show",rawName:"v-show",value:t.events_show,expression:"events_show"}],staticClass:"ma-0 pb-4"},[e(k.a,{staticClass:"mb-3"}),t._v(" "),e("div",{staticClass:"px-3 py-2"},[e("span",{staticClass:"d-inline-flex text-caption"},[e(o.a,{attrs:{color:"grey",inline:""}}),t._v("\n                                    ÔºöÈÖçÂ∏ÉÊôÇÈñìÂ§ñ\n                                ")],1),t._v(" "),e("span",{staticClass:"d-inline-flex text-caption"},[e(o.a,{attrs:{color:"green",inline:""}}),t._v("\n                                    ÔºöÂ∏≠Êï∞„Å´‰ΩôË£ï„ÅÇ„Çä\n                                ")],1),t._v(" "),e("span",{staticClass:"d-inline-flex text-caption"},[e(o.a,{attrs:{color:"amber",inline:""}}),t._v("\n                                    ÔºöÊÆã„Çä„Çè„Åö„Åã\n                                ")],1),t._v(" "),e("span",{staticClass:"d-inline-flex text-caption"},[e(o.a,{attrs:{color:"red",inline:""}}),t._v("\n                                    ÔºöÂú®Â∫´Âàá„Çå\n                                ")],1)]),t._v(" "),t._l(t.events,(function(r){return e("div",[e(f.a,{attrs:{width:"100%"},scopedSlots:t._u([{key:"activator",fn:function(n){n.on,n.attrs;return[e(C.a,{staticClass:"ma-0 pa-0",attrs:{justify:"center"}},[e(v.a,{staticClass:"mx-0 ma-1 pa-0",attrs:{cols:"11"}},[e(c.a,{staticClass:"ma-0",on:{click:function(t){t.stopPropagation(),r.dialog=!0}}},[e(_.d,{staticClass:"py-2"},[t._v("\n                                                    "+t._s(r.timetable.timetablename)+"\n                                                    "),e(T.a),t._v(" "),Date.now()<r.timetable.sell_at.getTime()||r.timetable.sell_ends.getTime()<Date.now()?e(o.a,{attrs:{color:"grey",inline:""}}):r.ticket_number_data.taken_tickets/r.ticket_number_data.stock<.8?e(o.a,{attrs:{color:"green",inline:""}}):r.ticket_number_data.taken_tickets/r.ticket_number_data.stock>=.8&&r.ticket_number_data.taken_tickets<r.ticket_number_data.stock?e(o.a,{attrs:{color:"amber",inline:""}}):r.ticket_number_data.taken_tickets>=r.ticket_number_data.stock?e(o.a,{attrs:{color:"red",inline:""}}):t._e()],1),t._v(" "),e(_.b,{staticClass:"pb-2"},[e("p",{staticClass:"ma-0 pa-0"},[t._v("ÈÖçÂ∏ÉÊôÇÈñìÔºö"+t._s(t.DateFormatter(r.timetable.sell_at))+" ~ "+t._s(t.DateFormatter(r.timetable.sell_ends)))]),t._v(" "),e("p",{staticClass:"ma-0 pa-0"},[t._v("ÂÖ¨ÊºîÊôÇÈñìÔºö"+t._s(t.DateFormatter(r.timetable.starts_at))+" ~ "+t._s(t.DateFormatter(r.timetable.ends_at)))])])],1)],1)],1)]}}],null,!0),model:{value:r.dialog,callback:function(e){t.$set(r,"dialog",e)},expression:"event.dialog"}},[t._v(" "),e(c.a,{staticClass:"pa-2"},[e(_.d,{staticClass:"px-1"},[t._v(t._s(t.group.title)+" / "+t._s(t.group.groupname)+" - "+t._s(r.timetable.timetablename))]),t._v(" "),e(_.b,{staticClass:"px-1"},[e("p",{staticClass:"ma-0 pa-0"},[t._v("„Åì„ÅÆÂÖ¨Êºî„ÅÆÊï¥ÁêÜÂà∏„Çí„Å®„Çä„Åæ„Åô„ÅãÔºü")]),t._v(" "),e("p",{staticClass:"ma-0 pa-0"},[t._v("ÂÖ¨ÊºîÊôÇÈñìÔºö"+t._s(t.DateFormatter(r.timetable.starts_at))+" ~ "+t._s(t.DateFormatter(r.timetable.ends_at)))])]),t._v(" "),e("div",{staticClass:"px-1"},[t.user_me.is_student?e("p",{staticClass:"ma-0 pa-0 text-subtitle-2"},[t._v("Â∏≠Êï∞Ôºö1Â∏≠")]):e("p",{staticClass:"ma-0 pa-0 text-subtitle-2"},[e(x.a,[t._v("mdi-account-plus")]),t._v("ÂêåÊôÇ„Å´ÂÖ•Â†¥„Åô„Çã‰∫∫Êï∞(„ÅîÂÆ∂Êóè„Å™„Å©)")],1),t._v(" "),t.user_me.is_student?t._e():e(y.a,{attrs:{"tick-labels":t.person_labels,min:"1",max:"3"},scopedSlots:t._u([{key:"thumb-label",fn:function(r){return[e(x.a,{attrs:{dark:""}},[t._v("\n                                                "+t._s(t.person_icons[r.value-1])+"\n                                            ")])]}}],null,!0),model:{value:t.ticket_person,callback:function(e){t.ticket_person=e},expression:"ticket_person"}})],1),t._v(" "),e(_.a,{staticClass:"px-1"},[e(T.a),t._v(" "),e(l.a,{attrs:{color:"red",text:""},on:{click:function(t){r.dialog=!1}}},[t._v("\n                                            „ÅÑ„ÅÑ„Åà\n                                        ")]),t._v(" "),e(l.a,{attrs:{color:"primary"},on:{click:function(e){return t.CreateTicket(r,t.ticket_person)}}},[t._v("\n                                            „ÅØ„ÅÑ\n                                        ")])],1)],1)],1)],1)})),t._v(" "),0===t.events.length?e(v.a,{attrs:{cols:"12"}},[e(c.a,{attrs:{disabled:""}},[e(_.d,[t._v("ÁèæÂú®ÈÅ∏Êäû„Åß„Åç„ÇãÂÖ¨Êºî„ÅØ„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ")])],1)],1):t._e()],2)])],1),t._v(" "),e(c.a,{staticClass:"mb-4"},[e(_.c,[t._v("\n                        "+t._s(t.group.description)+"\n                    ")])],1)],1)],1),t._v(" "),e(D.a,{attrs:{color:"success",elevation:"2"},scopedSlots:t._u([{key:"action",fn:function(r){var n=r.attrs;return[e(l.a,t._b({attrs:{color:"white",icon:""},on:{click:function(e){t.success_alert=!1}}},"v-btn",n,!1),[e(x.a,[t._v("mdi-close")])],1)]}}]),model:{value:t.success_alert,callback:function(e){t.success_alert=e},expression:"success_alert"}},[t._v("\n            "+t._s(t.success_message)+"\n            ")]),t._v(" "),e(D.a,{attrs:{color:"red",elevation:"2"},scopedSlots:t._u([{key:"action",fn:function(r){var n=r.attrs;return[e(l.a,t._b({attrs:{color:"white",icon:""},on:{click:function(e){t.error_alert=!1}}},"v-btn",n,!1),[e(x.a,[t._v("mdi-close")])],1)]}}]),model:{value:t.error_alert,callback:function(e){t.error_alert=e},expression:"error_alert"}},[t._v("\n            "+t._s(t.error_message)+"\n            ")])],1)],1)}),[],!1,null,null,null);e.default=component.exports}}]);